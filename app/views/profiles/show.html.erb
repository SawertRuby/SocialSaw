<h1><%= @profile.username%></h1>
<h4><%= @profile.user.email %></h4>
<% if current_user.profile.avatar.attached? %>
    <%= image_tag(current_user.profile.avatar) %>
  <% else %>
    <span>–ù–µ—Ç –∞–≤–∞—Ç–∞—Ä–∞</span>
  <% end %>

<% if @profile.user == current_user %>
  <%= link_to '–ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å', edit_profile_path(@profile) %>
<% end %>


<% if user_signed_in? && current_user.profile != @profile %>
  <% if current_user.profile.following.include?(@profile) %>
    <%= button_to '–û—Ç–ø–∏—Å–∞—Ç—å—Å—è', profile_followers_path(@profile), method: :delete, class: 'btn btn-secondary' %>
  <% else %>
    <%= button_to '–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è', profile_followers_path(@profile), method: :post, class: 'btn btn-primary' %>
  <% end %>
<% end %>

<% if user_signed_in? %>
  <%= link_to "–ü–æ–¥–ø–∏—Å—á–∏–∫–∏  #{ @profile.followers.count}" , profile_followers_path(@profile) %>
<% end %>
<% if user_signed_in? %>
  <%= link_to "–ü–æ–¥–ø–∏—Å–∫–∏  #{ @profile.following.count}" , profile_followers_path(@profile) %>
<% end %>


<h2>–ü–æ—Å—Ç—ã</h2>
<% @posts.each do |post| %>
<% if post.profile.user == current_user %>
  <%= link_to '–ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Å—Ç', edit_post_path(post) %>
<% end %>
  <div class="post">
  <%= link_to @profile.username, post %>
  <h3><%= post.description %></h3>
  <% if post.images.attached? %>
    <% post.images.each do |image| %>
      <%= image_tag image %>
    <% end %>
  <% end %>
  </div>
  <% like = post.like.find_by(profile: current_user.profile) %>

<div class="like-buttons">
  <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ª–∞–π–∫–∞ -->
  <%= form_with(url: post_likes_path(post), method: :post, local: true) do |form| %>
    <%= hidden_field_tag :likeable_id, post.id %>
    <%= hidden_field_tag :likeable_type, 'Post' %>
    <%= hidden_field_tag :like_type, 1 %> <!-- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ª–∞–π–∫ -->

    <%= form.submit 'üëçüèª', class: like.present? && like.like_type == 1 ? 'active-like' : 'inactive-like' %>
    <span><%= post.like.where(like_type: 1).count %></span> <!-- –ü–æ–¥—Å—á–µ—Ç –ª–∞–π–∫–æ–≤ -->
  <% end %>

  <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –¥–∏–∑–ª–∞–π–∫–∞ -->
  <%= form_with(url: post_likes_path(post), method: :post, local: true) do |form| %>
    <%= hidden_field_tag :likeable_id, post.id %>
    <%= hidden_field_tag :likeable_type, 'Post' %>
    <%= hidden_field_tag :like_type, -1 %> <!-- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∏–∑–ª–∞–π–∫ -->

    <%= form.submit 'üëéüèª', class: like.present? && like.like_type == -1 ? 'active-dislike' : 'inactive-dislike' %>
    <span><%= post.like.where(like_type: -1).count %></span> <!-- –ü–æ–¥—Å—á–µ—Ç –¥–∏–∑–ª–∞–π–∫–æ–≤ -->
  <% end %>
</div>
<% end %>

